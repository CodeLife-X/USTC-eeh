{% extends 'File.html' %}
{% block File_content %}
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="generator" content="Aspose.Words for .NET 15.1.0.0" /><title></title></head><body><div><h2 style="font-size:22pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:center; widows:0"><span style="font-family:'Calibri Light'; font-size:22pt; font-weight:bold"> Verilog</span><span style="font-family:宋体; font-size:22pt; font-weight:bold">语法入门</span></h2><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog HDL</span><span style="font-family:宋体; font-size:10.5pt">是一种硬件描述语言（</span><span style="font-family:Calibri; font-size:10.5pt">HDL:Hardware Description Language</span><span style="font-family:宋体; font-size:10.5pt">），以文本形式来描述数字系统硬件的结构和行为的语言，用它可以表示逻辑电路图、逻辑表达式，还可以表示数字逻辑系统所完成的逻辑功能。 </span><span style="font-family:Calibri; font-size:10.5pt">Verilog HDL</span><span style="font-family:宋体; font-size:10.5pt">和</span><span style="font-family:Calibri; font-size:10.5pt">VHDL</span><span style="font-family:宋体; font-size:10.5pt">是世界上最流行的两种硬件描述语言，都是在</span><span style="font-family:Calibri; font-size:10.5pt">20</span><span style="font-family:宋体; font-size:10.5pt">世纪</span><span style="font-family:Calibri; font-size:10.5pt">80</span><span style="font-family:宋体; font-size:10.5pt">年代中期开发出来的。前者由</span><span style="font-family:Calibri; font-size:10.5pt">Gateway Design Automation</span><span style="font-family:宋体; font-size:10.5pt">公司（该公司于</span><span style="font-family:Calibri; font-size:10.5pt">1989</span><span style="font-family:宋体; font-size:10.5pt">年被</span><span style="font-family:Calibri; font-size:10.5pt">Cadence</span><span style="font-family:宋体; font-size:10.5pt">公司收购）开发。两种</span><span style="font-family:Calibri; font-size:10.5pt">HDL</span><span style="font-family:宋体; font-size:10.5pt">均为</span><span style="font-family:Calibri; font-size:10.5pt">IEEE</span><span style="font-family:宋体; font-size:10.5pt">标准。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">可以从五个层次对电路（系统）进行描述，包括</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">系统级、算法级、寄存器传输级（即</span><span style="font-family:Calibri; font-size:10.5pt">RTL</span><span style="font-family:宋体; font-size:10.5pt">级）、门级、开关级。我们平时用的最多的为</span><span style="font-family:Calibri; font-size:10.5pt">RTL</span><span style="font-family:宋体; font-size:10.5pt">级，故</span><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码也经常被称为</span><span style="font-family:Calibri; font-size:10.5pt">RTL</span><span style="font-family:宋体; font-size:10.5pt">代码。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">在笔者看来，掌握一门语言最快速的方法就是在实际应用中去学习，</span><span style="font-family:Calibri; font-size:10.5pt">Verilog HDL</span><span style="font-family:宋体; font-size:10.5pt">也不例外。下面我们就通过一系列实例来学习</span><span style="font-family:Calibri; font-size:10.5pt">Verilog HDL</span><span style="font-family:宋体; font-size:10.5pt">。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009615"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.1  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">简单组合逻辑电路</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">对于逻辑表达式：</span><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.001.png" width="166" height="22" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">其电路图如下所示：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.002.png" width="294" height="119" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码如下：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.003.png" width="430" height="144" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">module/endmodule</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">表征模块的开始与结束。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">example</span><span style="font-family:宋体; font-size:10.5pt">：模块名可由用户指定，可包含字母、数字及下划线，需以字母开头，区分大小写</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">assign</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">赋值操作关键字，该关键字后可跟一个赋值表达式，该关键字是实现组合逻辑操作的一种主要描述方式。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">input/output</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">表征该信号的方向，除输入、输出外还有一种</span><span style="font-family:Calibri; font-size:10.5pt">inout</span><span style="font-family:宋体; font-size:10.5pt">（输入输出）型。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">操作符</span><span style="font-family:宋体; font-size:10.5pt">：</span><span style="font-family:Calibri; font-size:10.5pt">~</span><span style="font-family:宋体; font-size:10.5pt">按位取反、</span><span style="font-family:Calibri; font-size:10.5pt">&amp;</span><span style="font-family:宋体; font-size:10.5pt">按位与、</span><span style="font-family:Calibri; font-size:10.5pt">|</span><span style="font-family:宋体; font-size:10.5pt">按位或</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">常用操作符及其优先级：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.004.png" width="316" height="287" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">建议大家在写代码时，在适当的地方加上括号，以增加可读性</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">综合后电路：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.005.png" width="277" height="154" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">上图是综合工具生成的电路图，大家可以自行化简上述电路，看是否等价。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009616"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.2  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">多</span><span style="font-family:Calibri; font-size:16pt; font-weight:bold">bit</span><span style="font-family:宋体; font-size:16pt; font-weight:bold">逻辑门</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">对于下面</span><span style="font-family:Calibri; font-size:10.5pt">5</span><span style="font-family:宋体; font-size:10.5pt">个逻辑表达式</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">y1 = a &amp; b;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">y2 = a | b;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">y3 = a ^ b;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">y4 = ~(a &amp; b);</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">y5 = ~(a | b);</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">其电路图如下所示：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.006.png" width="293" height="223" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">代码为：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.007.png" width="251" height="249" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明</span><span style="font-family:Calibri; font-size:10.5pt">:</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">[3:0]</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">表征该信号的位宽，实例中是推荐写法，</span><span style="font-family:Calibri; font-size:10.5pt">[0:3]</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">[4:1]</span><span style="font-family:宋体; font-size:10.5pt">等写法也是合法的</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">//</span><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">、</span><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">/* */</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">代码注释，增加代码可读性，</span><span style="font-family:Calibri; font-size:10.5pt">//</span><span style="font-family:宋体; font-size:10.5pt">为单行注释，</span><span style="font-family:Calibri; font-size:10.5pt">/* */</span><span style="font-family:宋体; font-size:10.5pt">为多行注释</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009617"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.3  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">八输入与门</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">对于逻辑表达式 </span><span style="font-family:Calibri; font-size:10.5pt">y = a[7] &amp; a[6] &amp; a[5] &amp; a[4] &amp; a[3] &amp; a[2] &amp; a[1] &amp; a[0]</span><span style="font-family:宋体; font-size:10.5pt">；</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">其电路图为：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.008.png" width="215" height="113" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.009.png" width="349" height="160" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">a[7]</span><span style="font-family:宋体; font-size:10.5pt">：可将一个多位宽信号中的一位或多位以此种方式进行单独处理</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">&amp;</span><span style="font-family:宋体; font-size:10.5pt">：按位与、归并与操作，如该操作符只有一个操作数时，则将该操作数的所有位进行相与操作，可以实现与注释部分相同的功能，但写法更简洁。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009618"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.4  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">一位全加器</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">对于表达式 </span><span style="font-family:Calibri; font-size:10.5pt">{cout</span><span style="font-family:宋体; font-size:10.5pt">，</span><span style="font-family:Calibri; font-size:10.5pt">s} = a + b + cin;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">其电路图为：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.010.png" width="389" height="166" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.011.png" width="239" height="238" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">wire</span><span style="font-family:宋体; font-size:10.5pt">：线网型数据类型，</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">语法中的一种主要数据类型，用于表示线网型信号，与实际电路中的信号连线相对应。</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">是</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">中的默认数据类型，此例中的输入输出信号没有指定数据类型，则默认为</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">型。除</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">外，另外一种主要数据类型为</span><span style="font-family:Calibri; font-size:10.5pt">reg</span><span style="font-family:宋体; font-size:10.5pt">，表示寄存器类型数据。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">内部信号</span><span style="font-family:宋体; font-size:10.5pt">：此例中的</span><span style="font-family:Calibri; font-size:10.5pt">p</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">g</span><span style="font-family:宋体; font-size:10.5pt">为内部信号，可以简化设计，增加代码可读性。</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009619"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.5  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">三态门</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">电路图</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.012.png" width="406" height="107" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.013.png" width="198" height="140" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">z</span><span style="font-family:宋体; font-size:10.5pt">：高阻态，</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">中，信号共有</span><span style="font-family:Calibri; font-size:10.5pt">4</span><span style="font-family:宋体; font-size:10.5pt">种状态“</span><span style="font-family:Calibri; font-size:10.5pt">0</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">1</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">x</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">z</span><span style="font-family:宋体; font-size:10.5pt">”，分别表示低电平、高电平、不确定态和高阻态。对于没有进行初始化的信号，一般处于不确定态（</span><span style="font-family:Calibri; font-size:10.5pt">x</span><span style="font-family:宋体; font-size:10.5pt">），高阻态表示该信号没有被其他信号驱动，经常用于有多个驱动源的总线型数据上。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">4</span><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">’</span><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">bz</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">数据格式，表示该信号为</span><span style="font-family:Calibri; font-size:10.5pt">4bit</span><span style="font-family:宋体; font-size:10.5pt">位宽，用二进制方式表示，对于数据格式的进一步说明，可见下表</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.014.png" width="378" height="259" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009620"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.6  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">八位两路选择器</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">电路图：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.015.png" width="340" height="254" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.016.png" width="312" height="347" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">模块例化</span><span style="font-family:宋体; font-size:10.5pt">：可通过实例化已经设计好的模块来达到重用模块，简化设计的目的。可将一个模块重用多次，在同一模块中，实例化名称（本例中为</span><span style="font-family:Calibri; font-size:10.5pt">lsbmux</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">msbmux</span><span style="font-family:宋体; font-size:10.5pt">）可任意指定，但不能相同，也不能使用</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">中的关键字。本例中列举了</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">语法支持的两种实例化方式，推荐使用第二种方式，虽然代码量增加了一些，但增加了可读性，同时降低了出错的风险。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">对于第一种模块例化方法，应严格保证实例化模块（</span><span style="font-family:Calibri; font-size:10.5pt">lsbmux</span><span style="font-family:宋体; font-size:10.5pt">）中的参数排列顺序与被实例化模块（</span><span style="font-family:Calibri; font-size:10.5pt">mux2</span><span style="font-family:宋体; font-size:10.5pt">）的参数排列顺序严格一致。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">对于第二种方式点后面是被例化模块（</span><span style="font-family:Calibri; font-size:10.5pt">mux2</span><span style="font-family:宋体; font-size:10.5pt">）的接口信号，括号内的是实例化模块（</span><span style="font-family:Calibri; font-size:10.5pt">msbmux</span><span style="font-family:宋体; font-size:10.5pt">）的接口信号。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.017.png" width="389" height="20" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">位拼接</span><span style="font-family:宋体; font-size:10.5pt">：可将一个或多个信号的指定位，拼接成一个新的信号，对于上述表达式，如果</span><span style="font-family:Calibri; font-size:10.5pt">y</span><span style="font-family:宋体; font-size:10.5pt">是一</span><span style="font-family:Calibri; font-size:10.5pt">12bit</span><span style="font-family:宋体; font-size:10.5pt">的信号，则其各位的值为：</span><span style="font-family:Calibri; font-size:10.5pt">a[2] a[1] b[0] b[0] b[0] a[0] 1 0 0 0 1 0</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">下划线</span><span style="font-family:宋体; font-size:10.5pt">：数字中间的下划线是为了增加程序可读性，可直接将其忽略。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009621"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.7  D</span><span style="font-family:宋体; font-size:16pt; font-weight:bold">触发器</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">电路图：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.018.png" width="327" height="71" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.019.png" width="184" height="147" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">时序逻辑</span><span style="font-family:宋体; font-size:10.5pt">：电路具有记忆功能，电路状态不但与当前输入有关，还与前一时刻的状态有关。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">同步逻辑</span><span style="font-family:宋体; font-size:10.5pt">：在同一的时钟信号激励下工作，输出只在时钟的上升沿（或者下降沿）发生变化。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">reg</span><span style="font-family:宋体; font-size:10.5pt">：除</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">类型外，另外一种常用的数据类型，一般表示寄存器类型数据，不过并不绝对，记住一条原则：在</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内被赋值的信号应定义成</span><span style="font-family:Calibri; font-size:10.5pt">reg</span><span style="font-family:宋体; font-size:10.5pt">型，用</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">语句赋值的信号应定义成</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">型。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">always</span><span style="font-family:宋体; font-size:10.5pt">：除</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">外，另外一种实现赋值操作的关键字，两者都不可嵌套，区别在于，</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">语句只能实现组合逻辑赋值，且一个</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">语句后面只能跟一条赋值表达式。而</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">即能实现组合逻辑赋值，又能实现时序逻辑赋值操作，且可以包含多条赋值表达式，多条赋值表达式，则应位于</span><span style="font-family:Calibri; font-size:10.5pt">begin/end</span><span style="font-family:宋体; font-size:10.5pt">对中间。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.020.png" width="280" height="95" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.021.png" width="553" height="103" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">posedge</span><span style="font-family:宋体; font-size:10.5pt">：</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">关键字，表示上升沿的意思。</span><span style="font-family:Calibri; font-size:10.5pt">A</span><span style="font-family:Calibri; font-size:10.5pt">lways@(posedge clk)</span><span style="font-family:宋体; font-size:10.5pt">表示在</span><span style="font-family:Calibri; font-size:10.5pt">clk</span><span style="font-family:宋体; font-size:10.5pt">信号的上升沿的时刻，执行</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内部的语句，与此相对应的，是表示下降沿的关键字</span><span style="font-family:Calibri; font-size:10.5pt">negedge</span><span style="font-family:宋体; font-size:10.5pt">。凡是带有</span><span style="font-family:Calibri; font-size:10.5pt">posedge</span><span style="font-family:宋体; font-size:10.5pt">或</span><span style="font-family:Calibri; font-size:10.5pt">negedge</span><span style="font-family:宋体; font-size:10.5pt">的</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块，都会被综合成时序逻辑电路。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">阻塞</span><span style="font-family:Calibri; font-size:10.5pt">/</span><span style="font-family:宋体; font-size:10.5pt">非阻塞赋值：采用“</span><span style="font-family:Calibri; font-size:10.5pt">&lt;=</span><span style="font-family:宋体; font-size:10.5pt">”进行赋值的语句，称为“非阻塞赋值”，采用“</span><span style="font-family:Calibri; font-size:10.5pt">=</span><span style="font-family:宋体; font-size:10.5pt">”进行赋值的语句，称为“阻塞赋值”。在</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块中，阻塞式赋值方式语句执行有先后顺序，而非阻塞赋值语句则是同时执行。因此，在时序逻辑电路中，两种赋值方式可能或综合出不同的电路结构。如下所示</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.022.png" width="427" height="113" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.023.png" width="554" height="121" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">显然，第二种电路才是符合我们预期的设计，为避免出现一些稀奇古怪的电路，我们只需记住以下规则：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">i</span><span style="font-family:宋体; font-size:10.5pt">：在组合逻辑电路中，使用阻塞式赋值方式“</span><span style="font-family:Calibri; font-size:10.5pt">=</span><span style="font-family:宋体; font-size:10.5pt">”；</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">ii: </span><span style="font-family:宋体; font-size:10.5pt">在时序逻辑电路中，使用非阻塞式赋值方式“</span><span style="font-family:Calibri; font-size:10.5pt">&lt;=</span><span style="font-family:宋体; font-size:10.5pt">”</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">iii</span><span style="font-family:宋体; font-size:10.5pt">：在同一个</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内，只能存在一种赋值方式。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">iv</span><span style="font-family:宋体; font-size:10.5pt">：一个信号，只能在一个</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">或一个</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">语句下赋值。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">v</span><span style="font-family:宋体; font-size:10.5pt">：原则上来说，一个</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内只处理一个或一类信号，不同的信号可在不同的</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内处理。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">vi: always</span><span style="font-family:宋体; font-size:10.5pt">块内只能对</span><span style="font-family:Calibri; font-size:10.5pt">reg</span><span style="font-family:宋体; font-size:10.5pt">型信号进行处理，不能对</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">型数据赋值，也不能实例化模块</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009622"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.8  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">带同步复位的</span><span style="font-family:Calibri; font-size:16pt; font-weight:bold">D</span><span style="font-family:宋体; font-size:16pt; font-weight:bold">触发器</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.024.png" width="443" height="124" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.025.png" width="227" height="242" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">同步复位</span><span style="font-family:宋体; font-size:10.5pt">：复位只能发生在在</span><span style="font-family:Calibri; font-size:10.5pt">clk</span><span style="font-family:宋体; font-size:10.5pt">信号的上升沿，若</span><span style="font-family:Calibri; font-size:10.5pt">clk</span><span style="font-family:宋体; font-size:10.5pt">信号出现问题，则无法进行复位。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">I</span><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">f/else</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块中常用的条件判断语句，可以嵌套，有优先级，一般来说，应将复位处理逻辑放在第一个</span><span style="font-family:Calibri; font-size:10.5pt">if</span><span style="font-family:宋体; font-size:10.5pt">语句下，使其具有最高的优先级，该语句只能在</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内使用。另外一种比较常用的条件判断语句是</span><span style="font-family:Calibri; font-size:10.5pt">case</span><span style="font-family:宋体; font-size:10.5pt">。与</span><span style="font-family:Calibri; font-size:10.5pt">if/else</span><span style="font-family:宋体; font-size:10.5pt">语句不同，</span><span style="font-family:Calibri; font-size:10.5pt">case</span><span style="font-family:宋体; font-size:10.5pt">语句不带优先级</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009623"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.9  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">异步复位电路</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.026.png" width="431" height="132" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">Verilog</span><span style="font-family:宋体; font-size:10.5pt">代码</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.027.png" width="290" height="240" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt; font-style:italic; font-weight:bold">异步复位</span><span style="font-family:宋体; font-size:10.5pt">：在</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">的敏感变量列表中，包含了</span><span style="font-family:Calibri; font-size:10.5pt">posedge clk</span><span style="font-family:宋体; font-size:10.5pt">（</span><span style="font-family:Calibri; font-size:10.5pt">clk</span><span style="font-family:宋体; font-size:10.5pt">信号上升沿） 和</span><span style="font-family:Calibri; font-size:10.5pt">posedge reset</span><span style="font-family:宋体; font-size:10.5pt">（</span><span style="font-family:Calibri; font-size:10.5pt">reset</span><span style="font-family:宋体; font-size:10.5pt">信号下降沿）两个条件，只要有一个条件发生，便会执行</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内的逻辑。复位处理逻辑应具有最高的优先级。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">用</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块实现组合逻辑</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">代码</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.028.png" width="404" height="268" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块内被赋值的信号应定义成</span><span style="font-family:Calibri; font-size:10.5pt">reg</span><span style="font-family:宋体; font-size:10.5pt">类型，即使此信号在实际电路中是线型。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">语句实现组合逻辑应采用阻塞赋值方式。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009624"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.10  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">七段数码管</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">电路图</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">我们最常用的是七段式和八段式</span><span style="font-family:Calibri; font-size:10.5pt">LED</span><span style="font-family:宋体; font-size:10.5pt">数码管，八段比七段多了一个小数点，其他的基本相同。所谓的八段就是指数码管里有八个小</span><span style="font-family:Calibri; font-size:10.5pt">LED</span><span style="font-family:宋体; font-size:10.5pt">发光二极管，通过控制不同的</span><span style="font-family:Calibri; font-size:10.5pt">LED</span><span style="font-family:宋体; font-size:10.5pt">的亮灭来显示出不同的字形。数码管又分为共阴极和共阳极两种类型，其实共阴极就是将八个</span><span style="font-family:Calibri; font-size:10.5pt">LED</span><span style="font-family:宋体; font-size:10.5pt">的阴极连在一起，让其接地，这样给任何一个</span><span style="font-family:Calibri; font-size:10.5pt">LED</span><span style="font-family:宋体; font-size:10.5pt">的另一端高电平，它便能点亮。而共阳极就是将八个</span><span style="font-family:Calibri; font-size:10.5pt">LED</span><span style="font-family:宋体; font-size:10.5pt">的阳极连在一起。其原理如下图</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.029.png" width="390" height="178" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">代码</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.030.png" width="404" height="299" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">case</span><span style="font-family:宋体; font-size:10.5pt">：</span><span style="font-family:Calibri; font-size:10.5pt">case</span><span style="font-family:宋体; font-size:10.5pt">语句的各个条件之间没有优先级，且各条件应是互斥的。在组合逻辑电路中使用</span><span style="font-family:Calibri; font-size:10.5pt">case</span><span style="font-family:宋体; font-size:10.5pt">语句最后应加上</span><span style="font-family:Calibri; font-size:10.5pt">default</span><span style="font-family:宋体; font-size:10.5pt">语句，以防综合出锁存器电路。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009625"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.11  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">有限状态机（</span><span style="font-family:Calibri; font-size:16pt; font-weight:bold">FSM</span><span style="font-family:宋体; font-size:16pt; font-weight:bold">）</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">有限状态机（以下简称</span><span style="font-family:Calibri; font-size:10.5pt">FSM</span><span style="font-family:宋体; font-size:10.5pt">）在数字电路系统中具有举足轻重的低位，很多控制逻辑都是基于</span><span style="font-family:Calibri; font-size:10.5pt">FSM</span><span style="font-family:宋体; font-size:10.5pt">来实现的。</span><span style="font-family:Calibri; font-size:10.5pt">FSM</span><span style="font-family:宋体; font-size:10.5pt">在设计实现上，可以分成一段式、两段式、三段式三种。由于三段式具有条理清晰、可读性强，因此多数采用此种设计方式，下面是其电路简图。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.031.png" width="377" height="233" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">我们以设计具有</span><span style="font-family:Calibri; font-size:10.5pt">3</span><span style="font-family:宋体; font-size:10.5pt">个状态的简单状态机为例来进行讲解。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:center; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.032.png" width="138" height="126" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">代码：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.033.png" width="275" height="421" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">其中，第一个</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">为</span><span style="font-family:Calibri; font-size:10.5pt">FSM</span><span style="font-family:宋体; font-size:10.5pt">的第一段；第二个</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">块为</span><span style="font-family:Calibri; font-size:10.5pt">FSM</span><span style="font-family:宋体; font-size:10.5pt">的第二段；最后的</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">语句为</span><span style="font-family:Calibri; font-size:10.5pt">FSM</span><span style="font-family:宋体; font-size:10.5pt">的第三段。如有多个信号，可继续使用</span><span style="font-family:Calibri; font-size:10.5pt">assign</span><span style="font-family:宋体; font-size:10.5pt">或</span><span style="font-family:Calibri; font-size:10.5pt">always</span><span style="font-family:宋体; font-size:10.5pt">语句进行处理。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009626"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.12  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">参数传递</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">在例化模块时，可以通过参数传递的方式改变被例化模块的部分参数</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.034.png" width="394" height="137" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">如要例化一</span><span style="font-family:Calibri; font-size:10.5pt">8bit</span><span style="font-family:宋体; font-size:10.5pt">位宽的选择器，则使用默认参数即可，不需进行参数传递</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.035.png" width="224" height="20" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">如要例化一</span><span style="font-family:Calibri; font-size:10.5pt">12bit</span><span style="font-family:宋体; font-size:10.5pt">位宽的选择器，则可使用如下方式，将参数传递过去</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.036.png" width="287" height="21" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h3 style="font-size:16pt; line-height:173%; margin:13pt 0pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009627"><span style="font-family:Calibri; font-size:16pt; font-weight:bold">1.14  </span><span style="font-family:宋体; font-size:16pt; font-weight:bold">测试文件</span></a></h3><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">要测试我们设计的模块功能是否正常，最直接的办法就是烧写到</span><span style="font-family:Calibri; font-size:10.5pt">FPGA</span><span style="font-family:宋体; font-size:10.5pt">芯片中进行验证，但是这种方式往往结果并不直观，且出现问题后也不容易定位。为提高工作效率，我们可通过电脑仿真的方式进行功能验证，待仿真通过后，再烧写到</span><span style="font-family:Calibri; font-size:10.5pt">FPGA</span><span style="font-family:宋体; font-size:10.5pt">中，这样可以快速排除电路中存在的绝大多数</span><span style="font-family:Calibri; font-size:10.5pt">bug</span><span style="font-family:宋体; font-size:10.5pt">。在电脑上进行仿真，除了我们设计的功能模块之外，还需要另一模块——</span><span style="font-family:Calibri; font-size:10.5pt">testbench</span><span style="font-family:宋体; font-size:10.5pt">，用于产生被测模块所需的激励信号。由于</span><span style="font-family:Calibri; font-size:10.5pt">testbench</span><span style="font-family:宋体; font-size:10.5pt">只是用于电脑端的仿真，而不需要最终综合成电路，因此其写法更加灵活，可以使用</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">语法中的一些不可综合的语句，如</span><span style="font-family:Calibri; font-size:10.5pt">initial</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">#</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">$display</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">$readmemb</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">forever</span><span style="font-family:宋体; font-size:10.5pt">等。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">假设我们的被测模块完成以下功能</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.037.png" width="118" height="30" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">其</span><span style="font-family:Calibri; font-size:10.5pt">verilog</span><span style="font-family:宋体; font-size:10.5pt">代码为：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.038.png" width="224" height="122" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-size:14pt; line-height:157%; margin:14pt 0pt 14.5pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009628"><span style="font-family:'Calibri Light'; font-size:14pt; font-weight:bold">1.14.1  </span><span style="font-family:宋体; font-size:14pt; font-weight:bold">简单测试文件</span></a></h4><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">最简单的测试文件可以写成如下形式：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.039.png" width="259" height="257" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">语法说明：</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">testbench</span><span style="font-family:宋体; font-size:10.5pt">文件一般不包含任何输入输出信号</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">将被测模块实例化，被测模块的输入信号定义成</span><span style="font-family:Calibri; font-size:10.5pt">reg</span><span style="font-family:宋体; font-size:10.5pt">类型，输出信号定义成</span><span style="font-family:Calibri; font-size:10.5pt">wire</span><span style="font-family:宋体; font-size:10.5pt">类型。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt; font-style:italic; font-weight:bold">initia</span><span style="font-family:Calibri; font-size:10.5pt">l</span><span style="font-family:宋体; font-size:10.5pt">：通过</span><span style="font-family:Calibri; font-size:10.5pt">initial</span><span style="font-family:宋体; font-size:10.5pt">块构造输入信号的波形，同一</span><span style="font-family:Calibri; font-size:10.5pt">initial</span><span style="font-family:宋体; font-size:10.5pt">块内部的语句是串行执行的，多个</span><span style="font-family:Calibri; font-size:10.5pt">initial</span><span style="font-family:宋体; font-size:10.5pt">块之间并发执行。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h4 style="font-size:14pt; line-height:157%; margin:14pt 0pt 14.5pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009629"><span style="font-family:'Calibri Light'; font-size:14pt; font-weight:bold">1.14.2  </span><span style="font-family:宋体; font-size:14pt; font-weight:bold">自检测试文件</span></a></h4><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">带自检功能的测试文件如下所示，可以对输出结果进行判断，并打印错误信息</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.040.png" width="427" height="323" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">模块的输入信号给定之后，就有有结果输出，将实际输出结果于预期结果做比较，如果不同，则打印出错误信息。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><h4 style="font-size:14pt; line-height:157%; margin:14pt 0pt 14.5pt; orphans:0; page-break-after:avoid; page-break-inside:avoid; text-align:justify; widows:0"><a name="_Toc458009630"><span style="font-family:'Calibri Light'; font-size:14pt; font-weight:bold">1.14.3  </span><span style="font-family:宋体; font-size:14pt; font-weight:bold">测试向量</span></a></h4><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">通过测试向量进行仿真</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">将输入信号的各种组合以及对应的输出结果构成一测试向量，则每个向量中都包含了一种输入状态，以及该状态下的期望输出结果</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">将该向量导入一内存数组</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">构造一时钟信号</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">在时钟的上升沿，将一个向量赋值给被测模块输入端，并在时钟的下降沿对被测模块输出与期望输出结果进行对比，如果不相同，则记录下该向量，至此向量全部测试完毕。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">向量测试文件（</span><span style="font-family:Calibri; font-size:10.5pt">example.tv</span><span style="font-family:宋体; font-size:10.5pt">）</span><span style="font-family:Calibri; font-size:10.5pt">:</span><span style="font-family:宋体; font-size:10.5pt">包含</span><span style="font-family:Calibri; font-size:10.5pt">a</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">b</span><span style="font-family:宋体; font-size:10.5pt">、</span><span style="font-family:Calibri; font-size:10.5pt">c</span><span style="font-family:宋体; font-size:10.5pt">以及</span><span style="font-family:Calibri; font-size:10.5pt">y_expected</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">000_1</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">001_0</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">010_0</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">011_0</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">100_1</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">101_1</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">110_0</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">111_0</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">测试文件</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><img src="../../static/image/Verilog/8b50dbf8-0d33-4840-b6f3-ade29af230d2.041.png" width="519" height="608" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">前面介绍了三种测试方法，三种方法各有其优缺点。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">简单测试文件编写简单，容易上手，但需要人工判断仿真结果的正确性；</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">带自检的测试文件可以将错误信息打印出来，但编写稍微复杂一些，且激励波形仍需通过人工输入代码来完成；</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">测试向量法测试文件编写最为复杂，还需要编写一个用于跟被测模块结果进行比较的黄金模型，但此种方法测试最为充分，且后续维护起来也最容易。</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p><p style="font-size:10.5pt; line-height:115%; margin:0pt 0pt 10pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:10.5pt">&#xa0;</span></p></div><div class="cnzz" style="display: none;">
	        <script src="https://s23.cnzz.com/z_stat.php?id=1277655852&web_id=1277655852" language="JavaScript"></script>
            </div>
            <div class="docpe" style="position: absolute;color: white;margin-left:-450;">
            <a target="_blank" href="http://www.docpe.com">档铺网——在线文档免费处理</a>
            </div>
            </body></html>
{% endblock %}